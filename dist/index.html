<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lalo</title>
    <link rel="icon" type="image/png" href="./favicon.png">
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  </head>
    
  <body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
      <div class="loading-wrapper">
        <div class="is-animate">
          <div class="l">l</div>
          <div class="l">o</div>
          <div class="l">a</div>
          <div class="l">d</div>
          <div class="l">i</div>
          <div class="l">n</div>
          <div class="l">g</div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent" style="display: none;">
    <!-- Paw Prints Background -->
    <div class="paw-prints-container" id="pawPrintsContainer"></div>
    
    <!-- Top Bar -->
    <div class="top-bar">
      <div class="top-bar-content">
        <div class="game-title-top">Lalo The Cat</div>
      </div>
    </div>

    <div class="app-container">
      <!-- Left Sidebar -->
      <div class="sidebar left-sidebar">
        <!-- Meet Lalo Panel -->
        <div class="panel meet-lalo-panel">
          <div class="panel-header">MEET LALO</div>
          <div class="lalo-image-container">
            <canvas id="lalo3dCanvas" class="lalo-3d-canvas"></canvas>
          </div>
        </div>

        <!-- Cat Stats -->
        <div class="panel cat-stats-panel">
          <div class="panel-header">CAT STATS</div>
          <div class="cat-stats-content">
          <div class="stat-section-title">Primary Stats</div>
          <div class="stat-row">
            <span class="stat-label">Hunger</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar hunger-bar" style="width: 99%"></div>
            </div>
            <span class="stat-value">99/100</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Energy</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar energy-bar" style="width: 100%"></div>
            </div>
            <span class="stat-value">100/100</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Happiness</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar happiness-bar" style="width: 99%"></div>
            </div>
            <span class="stat-value">99/100</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Health</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar health-bar" style="width: 100%"></div>
            </div>
            <span class="stat-value">100/100</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Cleanliness</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar cleanliness-bar" style="width: 100%"></div>
            </div>
            <span class="stat-value">100/100</span>
          </div>

          <div class="stat-section-title" style="margin-top: 20px;">Emotional Stats</div>
          <div class="stat-row">
            <span class="stat-label">Hope</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar hope-bar" style="width: 85%"></div>
            </div>
            <span class="stat-value">85/100</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Courage</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar courage-bar" style="width: 75%"></div>
            </div>
            <span class="stat-value">75/100</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Stress</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar stress-bar" style="width: 20%"></div>
            </div>
            <span class="stat-value">20/100</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Trust</span>
            <div class="stat-bar-wrapper">
              <div class="stat-bar trust-bar" style="width: 90%"></div>
            </div>
            <span class="stat-value">90/100</span>
          </div>
          </div>
        </div>

      </div>

      <!-- Center Game Area -->
      <div class="center-area">
        <div class="device-level-panel">
          <span class="device-level-value" id="gameLevelDisplay">Level 1: The Road</span>
        </div>
        <div class="pet-device">
          <div class="device-top-loop"></div>
          <div class="device-screen">
            <div id="game-container"></div>
          </div>
          <div class="device-buttons">
            <div class="device-button" id="xButton" title="Visit X">
              <img src="./x-icon.svg" alt="X" class="device-button-icon">
            </div>
            <div class="device-button" id="soundButton" title="Toggle Sound">
              <svg class="device-button-icon sound-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9V15H7L12 20V4L7 9H3ZM16.5 12C16.5 10.23 15.48 8.71 14 7.97V16.02C15.48 15.29 16.5 13.77 16.5 12ZM14 3.23V5.29C16.89 6.15 19 8.83 19 12C19 15.17 16.89 17.85 14 18.71V20.77C18.01 19.86 21 16.28 21 12C21 7.72 18.01 4.14 14 3.23Z" fill="currentColor"/>
              </svg>
            </div>
            <div class="device-button" id="pumpfunButton" title="Visit Pump.fun">
              <img src="./pumpfun-icon.png" alt="Pump.fun" class="device-button-icon">
            </div>
          </div>
        </div>
      </div>

      <!-- Right Sidebar -->
      <div class="sidebar right-sidebar">
        <!-- Achievements -->
        <div class="panel">
          <div class="panel-header">ACHIEVEMENTS</div>
          <div class="achievement-list">
            <div class="achievement-item unlocked">
              <span class="achievement-icon">[T]</span>
              <div class="achievement-info">
                <span class="achievement-name">First Steps</span>
                <span class="achievement-desc">First adventure</span>
              </div>
            </div>
            <div class="achievement-item unlocked">
              <span class="achievement-icon">[*]</span>
              <div class="achievement-info">
                <span class="achievement-name">Happy Cat</span>
                <span class="achievement-desc">Reach 100 happiness</span>
              </div>
            </div>
            <div class="achievement-item locked">
              <span class="achievement-icon">[?]</span>
              <div class="achievement-info">
                <span class="achievement-name">Explorer</span>
                <span class="achievement-desc">Visit all environments</span>
              </div>
            </div>
            <div class="achievement-item locked">
              <span class="achievement-icon">[?]</span>
              <div class="achievement-info">
                <span class="achievement-name">Champion</span>
                <span class="achievement-desc">Full journey</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Daily Tasks -->
        <div class="panel">
          <div class="panel-header">DAILY TASKS</div>
          <div class="task-list">
            <div class="task-item completed">
              <span class="task-checkbox">[X]</span>
              <span class="task-text">Feed Lalo 3 times</span>
            </div>
            <div class="task-item">
              <span class="task-checkbox">[ ]</span>
              <span class="task-text">Play 5 games</span>
            </div>
            <div class="task-item">
              <span class="task-checkbox">[ ]</span>
              <span class="task-text">Reach 1000 steps</span>
            </div>
            <div class="task-item completed">
              <span class="task-checkbox">[X]</span>
              <span class="task-text">Keep hope above 80</span>
            </div>
          </div>
        </div>

        <!-- Customization -->
        <div class="panel">
          <div class="panel-header">CUSTOMIZATION</div>
          <div class="custom-section">
            <div class="custom-label">Skin</div>
            <div class="custom-options">
              <button class="custom-btn active">Default</button>
              <button class="custom-btn">Orange</button>
              <button class="custom-btn">Black</button>
            </div>
          </div>
          <div class="custom-section">
            <div class="custom-label">Accessory</div>
            <div class="custom-options">
              <button class="custom-btn">None</button>
              <button class="custom-btn">Hat</button>
              <button class="custom-btn">Bow</button>
            </div>
          </div>
        </div>

        <!-- Stats History -->
        <div class="panel">
          <div class="panel-header">STATS HISTORY</div>
          <div class="history-chart">
            <div class="chart-bar" style="height: 85%">
              <span class="chart-label">Hope</span>
            </div>
            <div class="chart-bar" style="height: 75%">
              <span class="chart-label">Courage</span>
            </div>
            <div class="chart-bar" style="height: 90%">
              <span class="chart-label">Trust</span>
            </div>
            <div class="chart-bar" style="height: 60%">
              <span class="chart-label">Stress</span>
            </div>
          </div>
        </div>

        <!-- Mini Games -->
        <div class="panel">
          <div class="panel-header">MINI GAMES</div>
          <div class="minigame-grid">
            <button class="minigame-btn">
              <span class="minigame-icon">TGT</span>
              <span class="minigame-name">Target</span>
            </button>
            <button class="minigame-btn">
              <span class="minigame-icon">PZL</span>
              <span class="minigame-name">Puzzle</span>
            </button>
            <button class="minigame-btn">
              <span class="minigame-icon">DCE</span>
              <span class="minigame-name">Dice</span>
            </button>
            <button class="minigame-btn">
              <span class="minigame-icon">ARC</span>
              <span class="minigame-name">Arcade</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <audio id="backgroundMusic" loop autoplay>
      <source src="./background-music.mp3" type="audio/mpeg">
    </audio>
    <script src='https://codepen.io/Gthibaud/pen/dybzvNw.js'></script>
    <script src="./script.js?v=20levels"></script>
    <script src="./pet-stats.js"></script>
    <script>
      // Start background music
      const startMusic = () => {
        const music = document.getElementById('backgroundMusic');
        if (music) {
          music.volume = 0.5;
          const playPromise = music.play();
          if (playPromise !== undefined) {
            playPromise.catch(e => {
              console.log('Autoplay blocked, music will play on user interaction');
            });
          }
        }
      };

      document.addEventListener('DOMContentLoaded', () => {
        startMusic();
        
        document.addEventListener('click', () => {
          const music = document.getElementById('backgroundMusic');
          if (music && music.paused) {
            music.play();
          }
        }, { once: true });
      });
    </script>
    <script>
      // Loading screen logic
      window.addEventListener('load', function() {
        setTimeout(function() {
          const loadingScreen = document.getElementById('loadingScreen');
          const mainContent = document.getElementById('mainContent');
          
          if (loadingScreen && mainContent) {
            loadingScreen.style.opacity = '0';
            loadingScreen.style.transition = 'opacity 0.5s ease-out';
            
            setTimeout(function() {
              loadingScreen.style.display = 'none';
              mainContent.style.display = 'block';
              mainContent.style.animation = 'fadeIn 0.5s ease-out';
            }, 500);
          }
        }, 1500); // Show loading for 1.5 seconds
      });
    </script>
    <script>
      // Device buttons functionality
      document.addEventListener('DOMContentLoaded', function() {
        // X button - redirect to X
        const xButton = document.getElementById('xButton');
        if (xButton) {
          xButton.addEventListener('click', function() {
            window.open('https://x.com/thelalocat', '_blank');
          });
        }

        // Pump.fun button - redirect to Pump.fun
        const pumpfunButton = document.getElementById('pumpfunButton');
        if (pumpfunButton) {
          pumpfunButton.addEventListener('click', function() {
            window.open('https://pump.fun/coin/9q8E9SwGukJXPHcWFtEYFbUFkcMjrtYGrm2axB3kpump', '_blank');
          });
        }

        // Sound button - toggle music
        const soundButton = document.getElementById('soundButton');
        const soundIcon = soundButton?.querySelector('.sound-icon');
        let isMuted = false;

        if (soundButton && soundIcon) {
          soundButton.addEventListener('click', function() {
            const music = document.getElementById('backgroundMusic');
            if (music) {
              if (isMuted) {
                music.play();
                isMuted = false;
                // Sound on - speaker with sound waves
                soundIcon.innerHTML = '<path d="M3 9V15H7L12 20V4L7 9H3ZM16.5 12C16.5 10.23 15.48 8.71 14 7.97V16.02C15.48 15.29 16.5 13.77 16.5 12ZM14 3.23V5.29C16.89 6.15 19 8.83 19 12C19 15.17 16.89 17.85 14 18.71V20.77C18.01 19.86 21 16.28 21 12C21 7.72 18.01 4.14 14 3.23Z" fill="currentColor"/>';
              } else {
                music.pause();
                isMuted = true;
                // Sound off - speaker without sound waves (no X)
                soundIcon.innerHTML = '<path d="M3 9V15H7L12 20V4L7 9H3Z" fill="currentColor"/>';
              }
            }
          });
        }

        // Level counter above TV — sync with game (number + name)
        var LEVEL_NAMES = [
          'The Road', 'Forest Path', 'Mountain Trail', 'Desert Journey', 'Ocean Shore', 'Final Quest',
          'Hidden Valley', 'Stormy Pass', 'Crystal Cave', 'Sunset Hills', 'Frost Lake', 'Thunder Ridge',
          'Misty Woods', 'Golden Sands', 'Star Field', 'Dragon Peak', 'Silent Marsh', 'Fire Canyon',
          'Moon Bridge', 'Paradise End'
        ];
        function getLevelText(level) {
          var n = Math.max(1, Math.min(20, parseInt(level, 10) || 1));
          var name = LEVEL_NAMES[n - 1] || ('Level ' + n);
          return 'Level ' + n + ': ' + name;
        }
        function updateGameLevelDisplay(level) {
          const el = document.getElementById('gameLevelDisplay');
          if (el) el.textContent = getLevelText(level);
        }
        window.addEventListener('gameLevelChange', function(e) {
          if (e.detail && e.detail.level != null) updateGameLevelDisplay(e.detail.level);
        });
        setInterval(function() {
          if (window.game && typeof window.game.current_level !== 'undefined') {
            const el = document.getElementById('gameLevelDisplay');
            var text = getLevelText(window.game.current_level);
            if (el && el.textContent !== text) updateGameLevelDisplay(window.game.current_level);
          }
        }, 500);

        // 3D Model Loader for Meet Lalo panel
        let lalo3DInitialized = false;
        function initLalo3D() {
          if (lalo3DInitialized) return;
          
          const canvas = document.getElementById('lalo3dCanvas');
          if (!canvas) {
            console.log('Canvas not found, retrying...');
            setTimeout(initLalo3D, 200);
            return;
          }
          
          if (typeof THREE === 'undefined') {
            console.log('THREE.js not loaded, retrying...');
            setTimeout(initLalo3D, 200);
            return;
          }

          if (typeof THREE.GLTFLoader === 'undefined' && typeof GLTFLoader === 'undefined') {
            console.log('GLTFLoader not loaded, trying to load...');
            // Load GLTFLoader - it should be available as THREE.GLTFLoader or GLTFLoader
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js';
            script.onload = function() {
              console.log('GLTFLoader script loaded, checking availability...');
              // Wait a bit for the loader to initialize
              setTimeout(function() {
                if (typeof THREE.GLTFLoader !== 'undefined') {
                  console.log('THREE.GLTFLoader is available');
                  setTimeout(initLalo3D, 100);
                } else if (typeof GLTFLoader !== 'undefined') {
                  console.log('GLTFLoader is available');
                  setTimeout(initLalo3D, 100);
                } else {
                  console.error('GLTFLoader loaded but not accessible');
                  setTimeout(initLalo3D, 500);
                }
              }, 200);
            };
            script.onerror = function() {
              console.error('Failed to load GLTFLoader script');
              setTimeout(initLalo3D, 1000);
            };
            document.head.appendChild(script);
            return;
          }

          const container = canvas.parentElement;
          if (!container) {
            console.log('Container not found, retrying...');
            setTimeout(initLalo3D, 200);
            return;
          }
          
          const width = container.clientWidth || 300;
          const height = container.clientHeight || 200;
          
          if (width === 0 || height === 0) {
            console.log('Container has zero size, retrying...', width, height);
            setTimeout(initLalo3D, 200);
            return;
          }
          
          lalo3DInitialized = true;
          console.log('Initializing 3D model...');

          // Scene setup
          const scene = new THREE.Scene();

          const camera = new THREE.PerspectiveCamera(50, width / height, 0.1, 1000);
          camera.position.set(0, 0, 3);

          const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
          renderer.setSize(width, height);
          renderer.setPixelRatio(window.devicePixelRatio);
          renderer.setClearColor(0x000000, 0);

          // Lighting
          const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
          scene.add(ambientLight);
          const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
          directionalLight.position.set(5, 5, 5);
          scene.add(directionalLight);

          let model = null;
          let isDragging = false;
          let previousMousePosition = { x: 0, y: 0 };
          let rotationX = 0;
          let rotationY = 0;
          const MAX_ROT_DEG = 30;
          const MAX_ROT = (MAX_ROT_DEG * Math.PI) / 180;

          // Mouse drag rotation (clamp to 30 deg)
          canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMousePosition = { x: e.clientX, y: e.clientY };
          });

          canvas.addEventListener('mousemove', (e) => {
            if (!isDragging || !model) return;
            const deltaX = e.clientX - previousMousePosition.x;
            const deltaY = e.clientY - previousMousePosition.y;
            rotationY = Math.max(-MAX_ROT, Math.min(MAX_ROT, rotationY + deltaX * 0.01));
            rotationX = Math.max(-MAX_ROT, Math.min(MAX_ROT, rotationX + deltaY * 0.01));
            model.rotation.y = rotationY;
            model.rotation.x = rotationX;
            previousMousePosition = { x: e.clientX, y: e.clientY };
          });

          canvas.addEventListener('mouseup', () => {
            isDragging = false;
            if (model) autoRotY = model.rotation.y;
          });

          canvas.addEventListener('mouseleave', () => {
            isDragging = false;
            if (model) autoRotY = model.rotation.y;
          });

          // Touch support
          canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isDragging = true;
            previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
          });

          canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!isDragging || !model) return;
            const deltaX = e.touches[0].clientX - previousMousePosition.x;
            const deltaY = e.touches[0].clientY - previousMousePosition.y;
            rotationY = Math.max(-MAX_ROT, Math.min(MAX_ROT, rotationY + deltaX * 0.01));
            rotationX = Math.max(-MAX_ROT, Math.min(MAX_ROT, rotationX + deltaY * 0.01));
            model.rotation.y = rotationY;
            model.rotation.x = rotationX;
            previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
          });

          canvas.addEventListener('touchend', () => {
            isDragging = false;
            if (model) autoRotY = model.rotation.y;
          });

          // Start animation loop (swing ±15 deg = 30 deg total)
          let autoRotDir = 1;
          let autoRotY = 0;
          const AUTO_SPEED = 0.008 / 3;
          const HALF_MAX = MAX_ROT / 2;
          function animate() {
            requestAnimationFrame(animate);
            if (model && !isDragging) {
              autoRotY += autoRotDir * AUTO_SPEED;
              if (autoRotY >= HALF_MAX) { autoRotY = HALF_MAX; autoRotDir = -1; }
              if (autoRotY <= -HALF_MAX) { autoRotY = -HALF_MAX; autoRotDir = 1; }
              model.rotation.y = autoRotY;
              model.rotation.x = 0;
            }
            renderer.render(scene, camera);
          }
          animate();

          // Load GLB model
          let LoaderClass = null;
          if (typeof THREE.GLTFLoader !== 'undefined') {
            LoaderClass = THREE.GLTFLoader;
            console.log('Using THREE.GLTFLoader');
          } else if (typeof GLTFLoader !== 'undefined') {
            LoaderClass = GLTFLoader;
            console.log('Using GLTFLoader');
          } else {
            console.error('GLTFLoader not available');
            return;
          }
          const loader = new LoaderClass();
          console.log('Loading model: ./lalo-model.glb');
          loader.load(
            './lalo-model.glb',
            (gltf) => {
              console.log('Model loaded successfully!');
              model = gltf.scene;
              scene.add(model);

              // Center and scale model
              const box = new THREE.Box3().setFromObject(model);
              const center = box.getCenter(new THREE.Vector3());
              const size = box.getSize(new THREE.Vector3());
              const maxDim = Math.max(size.x, size.y, size.z);
              const scale = 2.0 / maxDim;
              model.scale.multiplyScalar(scale);
              model.position.x = -center.x * scale;
              model.position.y = -center.y * scale + 0.1;
              model.position.z = -center.z * scale;
              console.log('Model positioned and scaled');
            },
            (progress) => {
              if (progress.total > 0) {
                const percent = (progress.loaded / progress.total) * 100;
                console.log('Loading model: ' + Math.round(percent) + '%');
              }
            },
            (error) => {
              console.error('Error loading 3D model:', error);
              lalo3DInitialized = false; // Allow retry
            }
          );

          // Handle resize
          function handleResize() {
            const newWidth = container.clientWidth;
            const newHeight = container.clientHeight || 200;
            camera.aspect = newWidth / newHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(newWidth, newHeight);
          }
          window.addEventListener('resize', handleResize);
        }

        // Initialize 3D model when main content is visible
        function init3DWhenReady() {
          const mainContentEl = document.getElementById('mainContent');
          if (mainContentEl) {
            const isVisible = mainContentEl.style.display === 'block' || 
                             mainContentEl.style.display === '' ||
                             window.getComputedStyle(mainContentEl).display !== 'none';
            if (isVisible) {
              console.log('Main content visible, initializing 3D model...');
              setTimeout(initLalo3D, 500);
            } else {
              setTimeout(init3DWhenReady, 200);
            }
          } else {
            setTimeout(init3DWhenReady, 200);
          }
        }
        
        // Try to init immediately if content is already visible
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(init3DWhenReady, 1000);
        });
        
        // Also try after load event
        window.addEventListener('load', function() {
          setTimeout(init3DWhenReady, 2000);
        });

        // Paw prints animation
        function generateRandomPaws() {
          const container = document.getElementById('pawPrintsContainer');
          if (!container) return;

          // Remove old paw prints
          container.innerHTML = '';

          // Random number of paw prints (between 12 and 20)
          const pawCount = Math.floor(Math.random() * 9) + 12;
          const sizes = [15, 18, 20, 22, 24, 25, 26, 28];

          for (let i = 0; i < pawCount; i++) {
            const paw = document.createElement('div');
            paw.className = 'paw-print';
            
            // Random size
            const size = sizes[Math.floor(Math.random() * sizes.length)];
            paw.style.width = size + 'px';
            paw.style.height = size + 'px';
            
            // Random position (avoiding center area where panels are)
            let x, y;
            do {
              x = Math.random() * 100;
              y = Math.random() * 100;
            } while (
              (x > 15 && x < 25 && y > 10 && y < 90) || // Left sidebar area
              (x > 75 && x < 85 && y > 10 && y < 90) || // Right sidebar area
              (x > 35 && x < 65 && y > 5 && y < 95)     // Center area
            );
            
            paw.style.left = x + '%';
            paw.style.top = y + '%';
            
            container.appendChild(paw);
          }

          // Fade in paw prints
          setTimeout(() => {
            const pawPrints = container.querySelectorAll('.paw-print');
            pawPrints.forEach((paw, index) => {
              setTimeout(() => {
                paw.classList.add('visible');
              }, index * 50); // Staggered appearance
            });
          }, 100);
        }

        function fadeOutPaws() {
          const container = document.getElementById('pawPrintsContainer');
          if (!container) return;

          const pawPrints = container.querySelectorAll('.paw-print');
          pawPrints.forEach((paw) => {
            paw.classList.remove('visible');
            paw.classList.add('fading');
          });
        }

        // Initialize paw prints after main content is shown
        let pawInterval;
        window.addEventListener('load', function() {
          setTimeout(function() {
            const mainContent = document.getElementById('mainContent');
            if (mainContent && mainContent.style.display !== 'none') {
              generateRandomPaws();
              
              // Change paw prints every 15 seconds
              pawInterval = setInterval(() => {
                fadeOutPaws();
                setTimeout(() => {
                  generateRandomPaws();
                }, 2000); // Wait for fade out to complete
              }, 15000);
            }
          }, 2000); // Wait for loading screen to finish
        });

        // Also trigger when main content becomes visible
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
              const mainContent = document.getElementById('mainContent');
              if (mainContent && mainContent.style.display === 'block') {
                setTimeout(() => {
                  if (!document.getElementById('pawPrintsContainer').hasChildNodes()) {
                    generateRandomPaws();
                    
                    // Start interval if not already started
                    if (!pawInterval) {
                      pawInterval = setInterval(() => {
                        fadeOutPaws();
                        setTimeout(() => {
                          generateRandomPaws();
                        }, 2000);
                      }, 15000);
                    }
                  }
                }, 300);
              }
            }
          });
        });

        const mainContentForObserver = document.getElementById('mainContent');
        if (mainContentForObserver) {
          observer.observe(mainContentForObserver, { attributes: true });
        }
      });
    </script>
    </div>
  </body>
  
</html>
